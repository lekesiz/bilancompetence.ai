# ============================================
# ENVIRONMENT
# ============================================
NODE_ENV=development
PORT=3001

# ============================================
# DATABASE - Neon PostgreSQL (Primary)
# ============================================
# Neon PostgreSQL connection string
# Format: postgresql://[user]:[password]@[host]/[database]?sslmode=require
DATABASE_URL=postgresql://user:password@ep-example-123456.us-east-2.aws.neon.tech/bilancompetence?sslmode=require

# Database pool configuration
DB_POOL_MIN=2
DB_POOL_MAX=10
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=10000

# ============================================
# DATABASE - Supabase (Legacy - Being Phased Out)
# ============================================
# NOTE: Supabase is being migrated to Neon PostgreSQL
# These variables are still required for legacy services
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here
SUPABASE_ANON_KEY=your-anon-key-here

# ============================================
# AUTHENTICATION & SECURITY
# ============================================
# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-this-to-random-64-char-string
JWT_ACCESS_TOKEN_EXPIRY=15m
JWT_REFRESH_TOKEN_EXPIRY=7d

# Bcrypt Configuration
BCRYPT_ROUNDS=10
BCRYPT_SALT_ROUNDS=10

# Session Configuration
SESSION_SECRET=your-session-secret-change-this

# ============================================
# CORS & SECURITY
# ============================================
CORS_ORIGIN=http://localhost:3000,http://localhost:3001,https://app.bilancompetence.ai
CORS_CREDENTIALS=true

# Security Headers
HELMET_ENABLED=true
CSP_ENABLED=true

# ============================================
# EMAIL SERVICE - SendGrid
# ============================================
SENDGRID_API_KEY=your-sendgrid-api-key-here
SENDGRID_FROM_EMAIL=noreply@bilancompetence.ai
SENDGRID_FROM_NAME=BilanCompetence
SENDGRID_REPLY_EMAIL=support@bilancompetence.ai

# SMTP Configuration (Alternative)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASS=your-sendgrid-api-key
SMTP_FROM_EMAIL=noreply@bilancompetence.ai

# ============================================
# FILE STORAGE - S3 Compatible
# ============================================
# AWS S3 or S3-compatible storage (e.g., Supabase Storage, Cloudflare R2)
STORAGE_BUCKET=bilancompetence-files
STORAGE_URL=https://your-project.supabase.co/storage/v1
STORAGE_MAX_FILE_SIZE=52428800  # 50MB in bytes
STORAGE_ALLOWED_TYPES=image/jpeg,image/png,image/gif,application/pdf,application/msword

# AWS S3 Configuration (if using AWS S3)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=eu-west-3
AWS_S3_BUCKET=bilancompetence-files

# ============================================
# EXTERNAL APIs - AI/ML Services
# ============================================
# Google Gemini API
GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_MODEL=gemini-pro

# OpenAI API (Optional)
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4

# ============================================
# EXTERNAL APIs - Job Recommendations
# ============================================
# France Travail (PÃ´le Emploi) API
FRANCE_TRAVAIL_API_KEY=your-france-travail-key-here
FRANCE_TRAVAIL_API_BASE_URL=https://api.francetravail.io/v1
FRANCE_TRAVAIL_CLIENT_ID=your-client-id
FRANCE_TRAVAIL_CLIENT_SECRET=your-client-secret
FRANCE_TRAVAIL_GRANT_TYPE=client_credentials
FRANCE_TRAVAIL_SCOPE=api/readonly

# Job Recommendation Caching
JOB_RECOMMENDATION_CACHE_TTL=3600  # 1 hour (in seconds)
ROME_CODE_CACHE_TTL=86400          # 24 hours (in seconds)

# ESCO API (European Skills/Competences/Qualifications/Occupations)
ESCO_API_URL=https://ec.europa.eu/esco/api
ESCO_API_KEY=your-esco-api-key-if-required

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_WINDOW=15  # minutes
RATE_LIMIT_GENERAL=100  # requests per window
RATE_LIMIT_AUTH=5  # requests per window
RATE_LIMIT_LOGIN=3  # failed attempts per window
RATE_LIMIT_REGISTRATION=2  # per hour
RATE_LIMIT_PASSWORD_RESET=5  # per day
RATE_LIMIT_EMAIL_VERIFICATION=10  # per hour

# ============================================
# LOGGING & MONITORING
# ============================================
LOG_LEVEL=info  # trace, debug, info, warn, error, fatal
LOG_FORMAT=json  # json, text
LOGS_DIR=./logs
LOGS_MAX_SIZE=5242880  # 5MB
LOGS_MAX_FILES=5

# Sentry Error Tracking (Optional)
SENTRY_DSN=your-sentry-dsn-here
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# ============================================
# REAL-TIME - Socket.io (Optional)
# ============================================
REALTIME_ENABLED=false
REALTIME_PORT=3002
REALTIME_ADAPTER=memory  # memory, redis
WEBSOCKET_CORS_ORIGIN=https://app.bilancompetence.ai,http://localhost:3000

# Redis (if using redis adapter)
REDIS_URL=redis://localhost:6379
REDIS_NAMESPACE=bilancompetence

# ============================================
# GDPR & COMPLIANCE
# ============================================
GDPR_ENABLED=true
DATA_RETENTION_DAYS=365
AUDIT_LOG_RETENTION_DAYS=730  # 2 years
ANONYMIZE_AFTER_DAYS=90

# ============================================
# PAYMENT & BILLING (Future)
# ============================================
STRIPE_PUBLIC_KEY=your-stripe-public-key
STRIPE_SECRET_KEY=your-stripe-secret-key
STRIPE_WEBHOOK_SECRET=your-stripe-webhook-secret

# ============================================
# FRONTEND URLS
# ============================================
FRONTEND_URL=http://localhost:3000
FRONTEND_VERIFY_EMAIL_URL=http://localhost:3000/verify-email
FRONTEND_RESET_PASSWORD_URL=http://localhost:3000/reset-password

# ============================================
# GOOGLE SERVICES (Optional)
# ============================================
GOOGLE_ANALYTICS_ID=G-RXFKWB8YQJ
GOOGLE_OAUTH_CLIENT_ID=your-google-oauth-client-id
GOOGLE_OAUTH_CLIENT_SECRET=your-google-oauth-client-secret

# reCAPTCHA (Optional)
RECAPTCHA_SITE_KEY=your-recaptcha-site-key
RECAPTCHA_SECRET_KEY=your-recaptcha-secret-key

# ============================================
# BACKUP & DISASTER RECOVERY
# ============================================
BACKUP_ENABLED=false
BACKUP_FREQUENCY=daily  # daily, weekly, monthly
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=gs://bilancompetence-backups

# ============================================
# DEBUG & DEVELOPMENT
# ============================================
DEBUG=false
VERBOSE=false
MOCK_DATA=false
SEED_DATABASE=false

# ============================================
# DEPLOYMENT CONFIGURATION
# ============================================
# Railway/Vercel specific
RAILWAY_ENVIRONMENT=production
VERCEL_ENV=production

# Health check configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health

